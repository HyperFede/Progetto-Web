<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuovo Prodotto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/pages/aggiungiProdotto.css">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>

<body>
    <header class="py-3 mb-4 border-bottom d-none d-lg-block custom-header">
        <div class="container d-flex flex-wrap justify-content-between align-items-center">
            <img src="assets/Logo.svg" alt="Logo" class="me-2" style="height: 80px;">

            <ul class="nav nav-pills align-items-center">
                <li class="nav-item dropdown">
                    <a class="nav-link nav-link-custom dropdown-toggle" href="#" id="userAccountDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-3 me-2"></i> <span id="usernameProfilo">Username</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userAccountDropdown">
                        <li><a class="dropdown-item" href="dashboardArtigiano.html"><i
                                    class="bi bi-person-workspace me-2"></i>IL MIO PROFILO</a></li>
                        <li><a class="dropdown-item" href="prodottiArtigiano.html"><i
                                    class="bi bi-box2-heart-fill me-2"></i>I MIEI PRODOTTI</a></li>
                        <li><a class="dropdown-item active" href="ordiniRicevuti.html"><i
                                    class="bi bi-receipt-cutoff me-2"></i>ORDINI RICEVUTI</a></li>
                        <li><a class="dropdown-item" href="leMieSegnalazioni.html"><i
                                    class="bi bi-flag-fill me-2"></i>LE MIE SEGNALAZIONI</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="logout.html"><i
                                    class="bi bi-box-arrow-right me-2"></i>LOGOUT</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <button class="btn add-product-btn" onclick="goToAddProducts(this)">
                        <i class="bi bi-plus-circle-fill me-1"></i> <span class="txt-new-product">Inserisci Prodotto
                        </span>
                    </button>
                </li>
            </ul>
        </div>
    </header>

    <!-- Navbar per schermi < lg -->
    <nav class="py-3 navbar bg-body-tertiary fixed-top d-lg-none">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <button class="navbar-toggler me-auto" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <img src="assets/Logo.svg" alt="Logo" class="me-2" style="height: 80px;">

            <div class="ms-auto"></div>
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Dashboard Artigiano</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="dashboard-sidebar-offcanvas d-flex flex-column h-100">
                        <ul class="nav nav-pills flex-column mb-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="dashboardArtigiano.html">
                                    <i class="bi bi-person-workspace me-2"></i>IL MIO PROFILO
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="prodottiArtigiano.html"> <i
                                        class="bi bi-box2-heart-fill me-2"></i>I MIEI PRODOTTI
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="ordiniRicevuti.html"> <i
                                        class="bi bi-receipt-cutoff me-2"></i>ORDINI RICEVUTI
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="leMieSegnalazioni.html"> <i
                                        class="bi bi-flag-fill me-2"></i>SEGNALAZIONI
                                </a>
                            </li>
                        </ul>
                        <hr class="sidebar-divider">
                        <button onclick="window.location.href='logout.html'" class="btn logout-btn w-100">
                            <i class="bi bi-box-arrow-right me-2"></i>LOGOUT
                        </button>
                    </div>
                </div>
            </div>
            <ul class="nav nav-pills align-items-center">
                <li class="nav-item">
                    <button class="btn add-product-btn" onclick="goToAddProducts(this)">
                        <i class="bi bi-plus-circle-fill me-1"></i>
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <main class="container my-4 pt-lg-0">
        <div class="col mb-3">
            <a href="prodottiArtigiano.html" onclick="history.back(); return false;" class="back-to-search-link">
                <i class="bi bi-arrow-left-circle me-1"></i>
                Indietro
            </a>
        </div>

        <h2 class="add-product-page-title text-center mb-2">Aggiungi Nuovo Prodotto</h2>

        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <div class="add-product-form-box p-4">
                    <form id="addProductForm">
                        <div class="mb-3">
                            <label for="productCategory" class="form-label">Categoria</label>
                            <select class="form-select dashboard-input" id="productCategory" name="category" required>
                                <option selected disabled value="">Scegli una categoria...</option>
                                <option value="Quadri">Quadri</option>
                                <option value="Sculture">Sculture</option>
                                <option value="Erboristeria">Erboristeria</option>
                                <option value="Creme">Creme</option>
                                <option value="Mobili e arredamento">Mobili e arredamento</option>
                                <option value="Collane e bracciali">Collane e bracciali</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label d-block">Immagine Prodotto</label>
                            <div class="product-detail-image-container position-relative border rounded"
                                style="background: #f0f2f5; overflow: hidden; min-height: 150px; /* Example */">
                                <!-- current image or placeholder -->
                                <div class="current-image-display 
                                            d-flex align-items-center justify-content-center 
                                            w-100 h-100">
                                    <!-- JS will fill this, e.g., with <span>IMG</span> or an <img> tag -->
                                </div>

                                <!-- camera-overlay -->
                                <div class="add-image-trigger 
                                            position-absolute top-0 start-0 
                                            d-flex flex-column align-items-center justify-content-center 
                                            w-100 h-100">
                                    <i class="bi bi-camera-fill fs-1" id = "addImageIcon"></i>
                                    <span class="mt-2 small" id = "addImageAggiungiTxt">Aggiungi</span>
                                </div>

                                <!-- visually-hidden file-input -->
                                <input type="file" id="productImageInput" name="image" accept="image/*"
                                    class="visually-hidden" />

                                <!-- delete-overlay (JS will control display) -->
                                <div class="image-action-overlay 
                                            position-absolute top-0 start-0 
                                            w-100 h-100 d-flex align-items-center justify-content-center"
                                    style="display: none; opacity: 0;">
                                    <button type="button" class="btn btn-danger" id="removeImageBtn">
                                        <i class="bi bi-trash me-1"></i>Rimuovi
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="productName" class="form-label">Nome Prodotto</label>
                            <input type="text" class="form-control dashboard-input" id="productName" name="productName"
                                required>
                        </div>

                        <div class="mb-3">
                            <label for="productDescription" class="form-label">Descrizione</label>
                            <textarea class="form-control dashboard-input" id="productDescription" name="description"
                                rows="5" required></textarea>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label for="productQuantity" class="form-label">Q.tà Disponibile</label>
                                <input type="number" class="form-control dashboard-input" id="productQuantity"
                                    name="quantity" min="0" required>
                            </div>
                            <div class="col-md-6">
                                <label for="productPrice" class="form-label">Prezzo (€)</label>
                                <input type="number" class="form-control dashboard-input" id="productPrice" name="price"
                                    min="0" step="0.01" required placeholder="">
                            </div>
                        </div>

                        <!-- Placeholder for success/error messages -->
                        <div id="messagePlaceholder" class="mb-3" style="display: none;">
                            <!-- Messages will be injected here by JavaScript -->
                        </div>

                        <div class="text-center mt-4">
                            <button type="submit" class="btn rounded-pill confirm-add-product-btn">CONFERMA</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/fetcher.js"></script>
    <script src="js/getUsernameArt.js"></script>
    <script src="js/imagePreview.js"></script>
    <script src="js/aggiungiProdotto.js"></script>


</body>

</html>